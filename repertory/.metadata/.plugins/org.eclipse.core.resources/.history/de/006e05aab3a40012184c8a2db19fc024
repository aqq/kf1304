/*
 * Cpp2mysql.h
 *
 *  Created on: 2012-5-16
 *      Author: root
 */

#ifndef CPP2MYSQL_H_
#define CPP2MYSQL_H_
#include<mysql/mysql.h>
#include<iostream>
#include<string>
using namespace std;

namespace poseidon {

class Cpp2mysql {
protected:
	string host, user, psw, port, dbname;
	MYSQL mysql;
	MYSQL_RES* result;
	MYSQL_ROW row;
protected:
	void init();

public:
	Cpp2mysql();
	Cpp2mysql(string host, string user, string psw, string port, string dbname);
	void connectTest();
	virtual ~Cpp2mysql();

	void close();
	bool connect();
	bool connect(string host, string user, string psw, string port,
			string dbname);
	MYSQL_RES* query(string sql);
	int execute(string sql, MYSQL_RES* result);
	int execute(string sql);
	char* ConvertBinaryToString(char* pBinaryData, int nLen);
	void insertBlobExample();
	//
	bool insertPacket();

	bool preparedExcute();

	void testReadBlob();
};

} /* namespace poseidon */
#endif /* CPP2MYSQL_H_ */
